---
layout: post
title: NginxでPOSTメソッドが受け取れず詰まった話
---

NginxでPOSTメソッドを受け取ろうとしたら、
405 Method Not Allowedとなって受け取れなかった話です。

GitHub WebhookからのPOSTを受け取って、ある動作を行い、  
最終的には静的ページをサーブするようなサーバを動かすときに詰まりました。

このサーバはSinatraで動いていて、HTTPS通信させるために、
フロントエンドをNginxとしています。
基本的に、GitHub Webhookは、POSTメソッドを投げてくるので、
どうにかして受け取らざるを得ません。

そこで、解決法を探ってみました。


## 解決方法

ステータスコードを405から200に書き換えてしまうやり方を一応採用してみました。
設定ファイルで、  

`error_page 405 =200 $uri;`

のようにすれば実現できます。
これ、エラーを書き換えているので、とてもつらい。
ただ、フォーラムとか見ても、だいたいこのやり方が多そう。
ぶっちゃけ、dirty hackすぎるので、本当はやりたくない…。

どうしたらいいんだろ
